<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            var turn = 0;
            var board = [];
            var winnings = [[0,1,2],[3,4,5],[6,7,8],
                            [0,3,6],[1,4,7],[2,5,8],
                            [0,4,8],[2,4,6]];

            function checkWinnings(player) {
                for(var i=0; i<winnings.length; i++) {
                    if(board[winnings[i][0]]==player &&
                       board[winnings[i][1]]==player &&
                       board[winnings[i][2]]==player) {
                        var oneBasedPlayer = (player+1);
                        alert("Player "+oneBasedPlayer+" wins!");
                        resetGame();
                    }
                }
            }

            function positionPlayed(id) { return board[id] != null; }

            function canvasClicked(id) {
                if(positionPlayed(id))
                    return;

                player = (turn % 2);
                color = (player==0 ? "red" : "blue");
                getTile(id).style.backgroundColor = color;
                board[id] = player;
                checkWinnings(player);
                turn++;

                if(turn == 9) {
                    alert("Game over!");
                    resetGame();
                }
            }

            function getTile(id) { return document.getElementById("c"+id); }

            function resetGame() {
                board = [];
                turn = 0;
                for(var i=0; i<9; i++) {
                    getTile(i).style.backgroundColor = "lightgrey";
                }
            }
        </script>
        <style>
            .row div {
                float: left;
                margin: 3px; 
                background-color: lightgray;
                width: 70px;
                height: 70px;
            }

            #board {
                width: 250px;
                margin: 70px auto;
            }
        </style>
    </head>
    <body>
        <div id="board">
            <div class="row">
                <div id="c0" onClick="canvasClicked(0)"></div>
                <div id="c1" onClick="canvasClicked(1)"></div>
                <div id="c2" onClick="canvasClicked(2)"></div>
            </div>
            <div class="row">
                <div id="c3" onClick="canvasClicked(3)"></div>
                <div id="c4" onClick="canvasClicked(4)"></div>
                <div id="c5" onClick="canvasClicked(5)"></div>
            </div>
            <div class="row">
                <div id="c6" onClick="canvasClicked(6)"></div>
                <div id="c7" onClick="canvasClicked(7)"></div>
                <div id="c8" onClick="canvasClicked(8)"></div>
            </div>
        </div>
    </body>
</html>
